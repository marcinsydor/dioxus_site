<!DOCTYPE html>
<html>
<head>
    <title>Contact - Dioxus Site</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <meta name="description" content="Get in touch with me through this interactive contact form">

    <!-- Styles -->
    <link rel="stylesheet" href="/assets/styling/main.css">
    <link rel="stylesheet" href="/assets/styling/navbar.css">
    <link rel="stylesheet" href="/assets/styling/about.css">
    <link rel="stylesheet" href="/assets/styling/contact.css">
    <link rel="stylesheet" href="/assets/styling/blog.css">
    <link rel="stylesheet" href="/assets/styling/echo.css">
    <link rel="stylesheet" href="/assets/tailwind.css">

    <!-- Favicon -->
    <link rel="icon" href="/assets/favicon.ico">

    <!-- Additional meta tags for SEO -->
    <meta property="og:title" content="Contact - Dioxus Site">
    <meta property="og:description" content="Get in touch with me through this interactive contact form">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Contact - Dioxus Site">
    <meta name="twitter:description" content="Get in touch with me through this interactive contact form">
    <link rel="preload" as="script" href="/assets/dioxus_site-dxh71439c95d26eaab0.js" crossorigin>
</head>
<body>
    <div id="main"><div id="navbar">
        <a href="/">Home</a>
        <a href="/about">About</a>
        <a href="/contact">Contact</a>
        <a href="/blog/1">Blog</a>
    </div>
    <div class="contact-container">
        <header class="contact-header">
            <h1 class="contact-title">Contact Me</h1>
            <p class="contact-subtitle">Get in touch! This form is powered by WebAssembly for interactive functionality.</p>
        </header>

        <div class="contact-content">
            <div class="contact-info">
                <h2>Contact Information</h2>
                <div class="contact-methods">
                    <div class="contact-method">
                        <span class="contact-icon">üìß</span>
                        <div>
                            <h3>Email</h3>
                            <a href="mailto:marcin.sydor@sky.uk" class="contact-link">marcin.sydor@sky.uk</a>
                        </div>
                    </div>
                    <div class="contact-method">
                        <span class="contact-icon">üíº</span>
                        <div>
                            <h3>LinkedIn</h3>
                            <p>Connect with me professionally</p>
                        </div>
                    </div>
                    <div class="contact-method">
                        <span class="contact-icon">‚ö°</span>
                        <div>
                            <h3>GitHub</h3>
                            <a href="https://github.com/marcinsydor" target="_blank" class="contact-link">@marcinsydor</a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="contact-form-section">
                <h2>Send a Message</h2>

                <div class="js-loading-notice">
                    <p>üöÄ <strong>Interactive Form:</strong> Loading JavaScript-powered contact form...</p>
                </div>

                <!-- This will be replaced by the WASM contact app -->
                <div id="contact-form-placeholder">
                    <p>Loading interactive form...</p>
                </div>
            </div>
        </div>

        <div class="tech-details">
            <h2>üîß Technical Implementation</h2>
            <div class="tech-grid">
                <div class="tech-item">
                    <h3>üöÄ JavaScript</h3>
                    <p>Interactive form powered by modern JavaScript with real-time validation</p>
                </div>
                <div class="tech-item">
                    <h3>‚ö° Reactive State</h3>
                    <p>Real-time form validation and state management using Dioxus signals</p>
                </div>
                <div class="tech-item">
                    <h3>üèóÔ∏è Hybrid Architecture</h3>
                    <p>Server-rendered HTML enhanced with client-side JavaScript</p>
                </div>
                <div class="tech-item">
                    <h3>üì± Progressive Enhancement</h3>
                    <p>Works with basic HTML, enhanced with dynamic features</p>
                </div>
            </div>
        </div>
    </div>

<script>
    // Pure JavaScript contact form implementation
    function initContactForm() {
        console.log('‚úÖ Initializing interactive contact form');

        // Replace placeholder with interactive form
        const placeholder = document.getElementById('contact-form-placeholder');
        if (!placeholder) return;

        placeholder.innerHTML = `
            <form id="contact-form" class="contact-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="contact-name">Name *</label>
                        <input type="text" id="contact-name" class="form-input" placeholder="Your full name" required />
                        <div class="error-message" id="name-error"></div>
                    </div>
                    <div class="form-group">
                        <label for="contact-email">Email *</label>
                        <input type="email" id="contact-email" class="form-input" placeholder="your.email@example.com" required />
                        <div class="error-message" id="email-error"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="contact-subject">Subject *</label>
                    <input type="text" id="contact-subject" class="form-input" placeholder="What's this about?" required />
                    <div class="error-message" id="subject-error"></div>
                </div>

                <div class="form-group">
                    <label for="contact-message">Message *</label>
                    <textarea id="contact-message" class="form-textarea" placeholder="Tell me what's on your mind..." rows="6" required></textarea>
                    <div class="error-message" id="message-error"></div>
                </div>

                <div class="form-actions">
                    <button type="submit" id="submit-btn" class="btn btn-primary">Send Message ‚ú®</button>
                    <button type="button" id="reset-btn" class="btn btn-secondary">Reset Form</button>
                </div>

                <div class="form-status" id="form-status"></div>

                <div class="form-note">
                    <p>üöÄ <strong>Interactive Demo:</strong> This form demonstrates client-side validation and processing!</p>
                </div>
            </form>

            <style>
                .error-message {
                    color: #dc2626;
                    font-size: 0.875rem;
                    margin-top: 0.25rem;
                    min-height: 1.25rem;
                }
                .form-status {
                    margin-top: 1rem;
                    padding: 1rem;
                    border-radius: 0.5rem;
                    text-align: center;
                    font-weight: 500;
                }
                .form-status.success {
                    background-color: #dcfce7;
                    color: #166534;
                    border: 1px solid #bbf7d0;
                }
                .form-status.error {
                    background-color: #fef2f2;
                    color: #dc2626;
                    border: 1px solid #fecaca;
                }
                .form-input:focus, .form-textarea:focus {
                    outline: 2px solid #3b82f6;
                    outline-offset: 2px;
                }
                .form-input.error, .form-textarea.error {
                    border-color: #dc2626;
                }
                .btn:disabled {
                    opacity: 0.6;
                    cursor: not-allowed;
                }
            </style>
        `;

        // Set up event listeners
        setupFormListeners();
        console.log('‚úÖ Contact form initialized successfully');
    }

    function setupFormListeners() {
        const form = document.getElementById('contact-form');
        const resetBtn = document.getElementById('reset-btn');

        if (form) {
            form.addEventListener('submit', handleFormSubmit);
        }

        if (resetBtn) {
            resetBtn.addEventListener('click', handleFormReset);
        }

        // Real-time validation
        ['contact-name', 'contact-email', 'contact-subject', 'contact-message'].forEach(id => {
            const input = document.getElementById(id);
            if (input) {
                input.addEventListener('blur', () => validateField(id));
            }
        });
    }

    function validateField(fieldId) {
        const input = document.getElementById(fieldId);
        if (!input) return false;

        const value = input.value;
        const errorId = fieldId.replace('contact-', '') + '-error';
        const errorElem = document.getElementById(errorId);

        let isValid = true;
        let errorMsg = '';

        switch (fieldId) {
            case 'contact-name':
                isValid = value.trim().length > 0;
                errorMsg = 'Name is required';
                break;
            case 'contact-email':
                isValid = value.trim().length > 0 && value.includes('@');
                errorMsg = 'Valid email is required';
                break;
            case 'contact-subject':
                isValid = value.trim().length > 0;
                errorMsg = 'Subject is required';
                break;
            case 'contact-message':
                isValid = value.trim().length > 0;
                errorMsg = 'Message is required';
                break;
        }

        if (isValid) {
            input.classList.remove('error');
            if (errorElem) errorElem.textContent = '';
        } else {
            input.classList.add('error');
            if (errorElem) errorElem.textContent = errorMsg;
        }

        return isValid;
    }

    function handleFormSubmit(e) {
        e.preventDefault();

        // Validate all fields
        const fields = ['contact-name', 'contact-email', 'contact-subject', 'contact-message'];
        const isAllValid = fields.every(fieldId => validateField(fieldId));

        if (!isAllValid) {
            showStatus('Please fix the errors above', 'error');
            return;
        }

        // Get form data
        const formData = {
            name: document.getElementById('contact-name').value,
            email: document.getElementById('contact-email').value,
            subject: document.getElementById('contact-subject').value,
            message: document.getElementById('contact-message').value,
            submitted_at: new Date().toISOString()
        };

        // Disable submit button
        const submitBtn = document.getElementById('submit-btn');
        if (submitBtn) {
            submitBtn.disabled = true;
            submitBtn.textContent = 'Sending...';
        }

        // Simulate form submission
        console.log('üìß Form submitted:', formData);

        // Show success message
        setTimeout(() => {
            showStatus(`‚úÖ Thank you, ${formData.name}! Your message has been received. (This is a demo)`, 'success');

            // Re-enable submit button
            if (submitBtn) {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Send Message ‚ú®';
            }
        }, 1000);
    }

    function handleFormReset() {
        // Clear all form fields
        ['contact-name', 'contact-email', 'contact-subject', 'contact-message'].forEach(id => {
            const input = document.getElementById(id);
            if (input) {
                input.value = '';
                input.classList.remove('error');
            }
        });

        // Clear error messages
        ['name-error', 'email-error', 'subject-error', 'message-error'].forEach(id => {
            const errorElem = document.getElementById(id);
            if (errorElem) errorElem.textContent = '';
        });

        // Clear status
        const status = document.getElementById('form-status');
        if (status) {
            status.textContent = '';
            status.className = 'form-status';
        }

        console.log('üîÑ Form reset');
    }

    function showStatus(message, type) {
        const statusElem = document.getElementById('form-status');
        if (statusElem) {
            statusElem.textContent = message;
            statusElem.className = `form-status ${type}`;
        }
    }

    // Initialize when DOM is loaded
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initContactForm);
    } else {
        initContactForm();
    }
</script>

<noscript>
    <div style="position: fixed; bottom: 1rem; right: 1rem; padding: 1rem; background: #fee; border: 1px solid #fcc; border-radius: 0.5rem; font-size: 0.875rem; max-width: 300px; z-index: 1000;">
        <p style="margin: 0; font-weight: bold; color: #c33;">‚ö†Ô∏è JavaScript Required</p>
        <p style="margin: 0.5rem 0 0 0; color: #c33;">This page requires JavaScript for interactive functionality.</p>
    </div>
</noscript></div>

    <!-- Static site notice -->
    <noscript>
        <div style="position: fixed; bottom: 1rem; right: 1rem; padding: 0.5rem 1rem; background: #f0f9ff; border: 1px solid #0ea5e9; border-radius: 0.5rem; font-size: 0.875rem; max-width: 300px; z-index: 1000;">
            <p style="margin: 0; font-weight: bold; color: #0369a1;">üìÑ Static HTML</p>
            <p style="margin: 0.25rem 0 0 0; color: #0369a1;">This page works without JavaScript!</p>
        </div>
    </noscript>

    <style>
    /* Basic styling for static pages */
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        margin: 0;
        padding: 0;
        line-height: 1.6;
        color: #333;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem;
    }

    #navbar {
        background: #f8fafc;
        padding: 1rem;
        border-bottom: 1px solid #e2e8f0;
        margin-bottom: 2rem;
    }

    #navbar a {
        margin-right: 1rem;
        text-decoration: none;
        color: #2563eb;
        font-weight: 500;
        padding: 0.5rem 1rem;
        border-radius: 0.375rem;
        transition: background-color 0.2s;
    }

    #navbar a:hover {
        background: #dbeafe;
    }

    .blog-nav {
        margin-top: 2rem;
        padding-top: 2rem;
        border-top: 1px solid #e2e8f0;
    }

    .blog-nav a {
        margin-right: 1rem;
        text-decoration: none;
        color: #2563eb;
    }

    .blog-nav a:hover {
        text-decoration: underline;
    }

    h1 {
        color: #1f2937;
        margin-bottom: 1rem;
    }

    h2 {
        color: #374151;
        margin-top: 2rem;
        margin-bottom: 1rem;
    }

    h3 {
        color: #4b5563;
        margin-top: 1.5rem;
        margin-bottom: 0.5rem;
    }

    ul {
        padding-left: 1.5rem;
    }

    li {
        margin-bottom: 0.25rem;
    }
    </style>
</body>
</html>